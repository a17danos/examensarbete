\section{Background}

\subsection{Web technologies}

The development of the world wide web has provided HTML, CSS, and JavaScript.

\subsubsection{HTML}

?

\subsubsection{CSS}

?

\subsection{JavaScript}

JavaScript was introduced 1995 with the intention to solve small tasks, e.g. validation of input data and small animations \parencite{Moller2018}. The last few years the web has evolved from simply being a platform for websites to also be a platform for (webb-)applications/apps.

JavaScript was a major addition to the set of web technologies. It is estimated that X \hl{add numbers with references here} use JavaScript.

[...]

\lstset{
    aboveskip=0cm,
    stringstyle=\ttfamily,
    showstringspaces = false,
    basicstyle=\scriptsize\ttfamily,
    commentstyle=\color{gray!45},
    keywordstyle=\bfseries,
    ndkeywordstyle=\bfseries,
    identifierstyle=\ttfamily,
    numbers=left,
    numbersep=15pt,
    numberstyle=\tiny,
    numberfirstline = false,
    breaklines=true
}

\lstdefinelanguage{JavaScript2}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, const, let, async, await, if, in, while, do, else, case, break, from},
  ndkeywords={class, export, boolean, throw, implements, import, this},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]",
  captionpos=b
}

\begin{lstlisting}[language=JavaScript2,numbers=left,caption=ccc]
Name.prototype = {
    methodName: function(params){
        var doubleQuoteString = "some text";
        var singleQuoteString = 'some more text';
        // this is a comment
        if(this.confirmed != null && typeof(this.confirmed) == Boolean && this.confirmed == true){
        document.createElement('h3');
        $('#system').append("This looks great");
        return false;
        } else {
        throw new Error;
        }
    }
}
\end{lstlisting}

\clearpage
\blindtext\\

\begin{lstlisting}[language=JavaScript2,numbers=none,caption=Listing 2,frame=shadowbox]
function isPrime(value) {
    for(var i = 2; i < value; i++) {k
        if(value % i === 0) {
            return false;
        }
    }
    return value > 1;
}
\end{lstlisting}

\blindtext

\begin{verbatim}
$ cat > prime.js
function isPrime(value) {
    for(var i = 2; i < value; i++) {k
        if(value % i === 0) {
            return false;
        }
    }
    return value > 1;
}
\end{verbatim}

\begin{verbatim}
    verb
\end{verbatim}

\begin{comment}
\begin{figure}
    \begin{verbatim}
        int main()
        {
            this is some code
        }
    \end{verbatim}
    \caption{My Caption}
    \label{my-label}
\end{figure}
\end{comment}

\lstset{language=Pascal}
\begin{lstlisting}[frame=leftline]  % Start your code-block
for i:=maxint to 0 do
begin
{ do nothing }
 end;
Write('Case insensitive ');
Write('Pascal keywords.');
\end{lstlisting}
 
\lstset {language=C++}
\begin{lstlisting}
for (int i=0; i<iterations;i++) {
    do something
}
\end{lstlisting}

\lstset{language=}
\begin{lstlisting}[caption=HelloWorld.sh]
    $ echo 'hello world!'
\end{lstlisting}

\lstset{ %
  language=C,                            % choose the language of the code
  basicstyle=\footnotesize,              % the size of the fonts that are used for the code
  backgroundcolor=\color{White},         % choose the background color. You must add \usepackage{color}
  commentstyle=\color{help}\textit,
  keywordstyle=\color{keyword}\textbf,
  breaklines=true,                       % sets automatic line breaking
  breakatwhitespace=true,                % sets if automatic breaks should only happen at whitespace
  showspaces=false,                      % show spaces adding particular underscores
  showstringspaces=true,                 % underline spaces within strings
  showtabs=true,                         % show tabs within strings adding particular underscores
  frame=none,                              % adds a frame around the code - none, single
  tabsize=8,                             % sets default tabsize to 8 spaces
  captionpos=b,                          % sets the caption-position to bottom
  numbers=left,                          % where to put the line-numbers -none, left, right
  numberstyle=\footnotesize,             % the size of the fonts that are used for the line-numbers
  stepnumber=1,                          % the step between two line-numbers. If it's 1 each line
                                         % will be numbered
}

\definecolor{keyword}{rgb}{0.65, 0.12, 0.82}
\definecolor{White}{rgb}{1, 1, 1}
\lstset{language=c}
\begin{lstlisting}[caption=HelloWorld.sh2]
    for (int i=0; i<iterations;i++) {
        do something
    }
\end{lstlisting}

\begin{program}
\mbox{A fast exponentiation procedure:}
\BEGIN \\ %
    \FOR i:=1 \TO 10 \STEP 1 \DO
        |expt|(2,i); \\ |newline|() \OD %
\rcomment{This text will be set flush to the right margin}
\WHERE
\PROC |expt|(x,n) \BODY
            z:=1;
            \DO \IF n=0 \THEN \EXIT \FI;
                \DO \IF |odd|(n) \THEN \EXIT \FI;
\COMMENT{This is a comment statement};
                n:=n/2; x:=x*x \OD;
                \{ n>0 \};
                n:=n-1; z:=z*x \OD;
            |print|(z) \ENDPROC
\END
\end{program}

\definecolor{lightgray}{rgb}{.9,.9,.9}
\definecolor{darkgray}{rgb}{.4,.4,.4}
\definecolor{purple}{rgb}{0.65, 0.12, 0.82}

\lstdefinelanguage{JavaScript}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  keywordstyle=\color{blue}\bfseries,
  ndkeywords={class, export, boolean, throw, implements, import, this},
  ndkeywordstyle=\color{darkgray}\bfseries,
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  commentstyle=\color{purple}\ttfamily,
  stringstyle=\color{red}\ttfamily,
  morestring=[b]',
  morestring=[b]"
}

\lstdefinelanguage{JS}{
  keywords={typeof, new, true, false, catch, function, return, null, catch, switch, var, if, in, while, do, else, case, break},
  ndkeywords={class, export, boolean, throw, implements, import, this},
  identifierstyle=\color{black},
  sensitive=false,
  comment=[l]{//},
  morecomment=[s]{/*}{*/},
  morestring=[b]',
  morestring=[b]"
}

\lstset{
   language=JavaScript,
   extendedchars=true,
   basicstyle=\footnotesize\ttfamily,
   showstringspaces=false,
   showspaces=false,
   numbers=left,
   numberstyle=\footnotesize,
   numbersep=9pt,
   tabsize=2,
   breaklines=true,
   showtabs=false,
   captionpos=b
}

\lstset{language=JS}

\begin{lstlisting}[frame=shadowbox,caption=prime.js,numbers=none]
Name.prototype = {
  methodName: function(params){
    var doubleQuoteString = "some text";
    var singleQuoteString = 'some more text';
    // this is a comment
    if(this.confirmed != null && typeof(this.confirmed) == Boolean && this.confirmed == true){
      document.createElement('h3');
      $('#system').append("This looks great");
      return false;
    } else {
      throw new Error;
    }
  }
}
\end{lstlisting}


\begin{lstlisting}[caption=Code,numbers=none]
    Name.prototype = {
        methodName: function(params){
          var doubleQuoteString = "some text";
          var singleQuoteString = 'some more text';
          // this is a comment
          if(this.confirmed != null && typeof(this.confirmed) == Boolean && this.confirmed == true){
            document.createElement('h3');
            $('#system').append("This looks great");
            return false;
          } else {
            throw new Error;
          }
        }
      }
\end{lstlisting}


\begin{lstlisting}[title=Figure 3,numbers=none]
      Source |       SS       df       MS              Number of obs =     198
-------------+------------------------------           F(  3,   194) =    0.62
       Model |  2.71676158     3  .905587193           Prob > F      =  0.6030
    Residual |  283.499771   194  1.46133902           R-squared     =  0.0095
-------------+------------------------------           Adj R-squared = -0.0058
       Total |  286.216532   197   1.4528758           Root MSE      =  1.2089
\end{lstlisting}

\subsubsection{Optimizing/ations}

[...]

A major problem with optimizing is that fact that JavaScript is a loosely typed language, which means that the interpreter needs to be able to store any type of data in any variable. If the interpreter instead would be able to distinguish between which type of data each variable can store, it would be much easier to optimize.

\subsubsection{JIT}

The manufacturers of web browsers has in the last few years focused on optimizing JavaScript performance in different ways, such as introducing ''Just-In-Time'' (JIT) compilers \parencite{HerreraChenLavoieHendren2018}.

\subsubsection{AOT}



\subsubsection{TypeScript}

TypeScript \hl{REF} is a superset of JavaScript that adds type information. Type information allows the programmer to see mistakes sooner during the development phase rather than later in runtime.

\begin{verbatim}
$ cat > prime.ts
function isPrime(value: number) {
    for(var i = 2; i < value; i++) {
        if(value % i === 0) {
            return false;
        }
    }
    return value > 1;
}
\end{verbatim}

This does not directly solve the problem, but decreases the number of runtime errors, and enables future backend optimizations such as improved guesses by the JIT-compiler.

\subsubsection{ASM.js}

ASM.js is a subset of JavaScript that is known to be heavily optimized.

There are transpilers between JavaScript and ASM.js such as EmScripten.

\begin{verbatim}
function strlen(ptr) { // calculate length of C string
    ptr = ptr|0;
    var curr = 0;
    curr = ptr;
    while (MEM8[curr]|0 != 0) {
        curr = (curr + 1)|0;
    }
    return (curr - ptr)|0;
}
    
\end{verbatim}

\paragraph{x}

x

\subparagraph{y}

y

\subsection{Web applications}

Web applications are made possible through use of JavaScript.

However according to \textcite{ReiserBlaser2017} there is always a desire for higher performance. \textcite{Zakai2018} describes JavaScript as an obstacle for demanding/truly high-performing applications/apps.

Web applications can be executed on the server with a thin wrapper in the client, in the client with our without a server counterpart. Or, as a combination of both client and server computation.

\subsubsection{Server}

[...]

\subsubsection{Client}

[...]

\subsection{Benchmarking}

\parencite{LehmannPradel2018,MalleGiulianiKiesebergHolzinger2018}

[...]

WebAssembly is according to \textcite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017} an option to JavaScript with higher performance. Higher performance makes way for demanding/truly high-performing applications/apps.

\subsection{WebAssembly}

WebAssembly\footnote{https://webassembly.org/} (Wasm) is by definition according to \textcite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017} a portable assembly-language for web browsers and future adaptations. Technically WebAssembly is bytecode created by \emph{compiling} (any form of) code to WebAssembly \parencite{Watt2018} which then can be executed in any WebAssembly-engine. This can be compared with JavaScript-code that is \emph{interpreted} while running inside a JavaScript-engine.

WebAssembly can be seen as a successor to earlier technologies such as asm.js from Mozilla and Native Client (NaCL) from Google. NaCL executes native code in a separate part of Chrome and asm.js  \parencite{Zakai2018} is a subset of JavaScript optimized for performance \parencite{VanEsNicolayStievenartDHondtDeRoover2016} and can be interpreted in any web browser.

Earlier work on what today is WebAssembly has also resulted in EmScripten \parencite{Zakai2011}, a compiler based on LLVM \parencite{LattnerAdve2014} that originates as a transpiler from JavaScript to asm.js \parencite{Zakai2011} that has been further developed \parencite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017} and is now able to compile both JavaScript and C/C++ to both asm.js and WebAssembly. EmScripten is the most common compiler to compile WebAssembly.

WebAssembly is the result of joint research and development between Apple, Google, Microsoft and Mozilla \parencite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017}. WebAssembly has as the first technology since JavaScript \emph{full} support in Chrome, Edge, Firefox and Safari \parencite{Moller2018}. Those web browsers that does not support WebAssembly can according to \textcite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017} use asm.js as ''polyfill''. WebAssembly is already being used where performance is of high importance, such as to generate cryptocurrency \parencite{RuthZimmermannWolsingHohlfeld2018}.

Initially WebAssembly supports code written in C/C++ \parencite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017}. 
The focus on C/C++ is largely based on WebAssembly implementation limitations such as the lack of garbage collection. According to \textcite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017} its a highly prioritized goal to allow WebAssembly to gain to access the web browsers built in garbage collector and that way support languages that use garbage collection.

WebAssembly is loaded as a module via a JavaScript API or another WebAssembly module \parencite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017}. According to \textcite{Moller2018} it's \emph{not} a goal to have WebAssembly replace JavaScript, the idea is that they \emph{complement} each other. One example of how JavaScript and WebAssembly could complement each other is to replace large portions of JavaScript within popular JavaScript-frameworks with WebAssembly, but keep the JavaScript API towards the developer and thus only provide the benefit of performance.

WebAssembly is new technology. The first articles about WebAssembly was published in 2017 \parencite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017,ReiserBlaser2017}.
