\section{Method}
\label{method}

Porting an full application is to big of a task for this thesis...


To answer the research question (of which algorithms that most benefit from being written using WebAssembly) an technology-oriented experiment will be conducted \parencite{WohlinRunesonHostOhlssonRegnellWesslen2012}. The tools that will be used are web browsers running on computing devices that will invoke JavaScript or WebAssembly. According to \textcite{WohlinRunesonHostOhlssonRegnellWesslen2012} an experiment is the most suited method …

“Experiments are launched when we want control over the situation and want to manipulate behavior directly, precisely and systematically”

“Experiments are appropriate to investigate different aspects [72, 162], including:
Confirm theories, i.e. to test existing theories.
Confirm conventional wisdom, i.e. to test people’s conceptions.
Explore relationships, i.e. to test that a certain relationship holds.
Evaluate the accuracy of models, i.e. to test that the accuracy of certain models is as expected.
Validate measures, i.e. to ensure that a measure actually measures what it is supposed to.
The strength of an experiment is that it can investigate in which situations the claims are true and they can provide a context in which certain standards, methods and tools are recommended for use.”

Excerpt From: Claes Wohlin, Per Runeson, Martin Höst, Magnus C. Ohlsson, Björn Regnell and Anders Wesslén. “Experimentation in Software Engineering”. Apple Books. 


Other methods are survey or case study. See wohlin et al.
table on page 124.

While an experiment is a good choice as outlined above, the selected method also has its drawbacks.

While an experiment has both execution control, measurement control, and is easy to replicate the investigation cost is higher compared to a survey or a case study and requires more resources. In practice this means that for this thesis a access to a set of computing devices is needed. There is also a time investment to be done to write and exececute all tests. The output of this thesis can not be directly commercialiest. \parencite{WohlinRunesonHostOhlssonRegnellWesslen2012}

An experiment is dependent on dependent, independent and unknown variables (Wohlin et al.). 
The dependent variables is the execution time in milliseconds. Other dependent variables could have been the size on disk of the compilation target, or the size of memory consumed while executing. The choice of execution time is because ….

There are three independent groups of independent variables. The primary one is the compilation target, JavaScript/asm.js or WebAssembly. The second one is which browser and by extension which engine that parses the compilation target. The third is the platform upon which that browser runs. A platform can be defined either by the operating system (macos, windows, linux, ios, android), by the type of processor (arm or x86), or by the type of hardware (desktop computer, laptop computer, tablet, or mobile phone). In practice many elements of a platform is mutual exclusive, e.g. iOS is only available on tablets and mobile phones from Apple.


To answer the research question a \emph{quantitative} method can be used in the form of a synthetic benchmark. A complement or a replacement for the use a synthetic benchmark would be to convert an existing JavaScript-project, such as a popular JavaScript framework/library, to WebAssembly and study the result.

To describe more differences more research questions is needed. To answer questions such as wether a certain technology (i.e. WebAssembly) is usable \emph{qualitative} methods should be used. Qualitative methods would provide a better perspective on WebAssembly.

\hl{glom ej nackdelar med experiment!!!}

To evaluate performance a benchmarking test suite this thesis will take the approach of implementing a benchmarking suite of tests written in C/C++. 

According to \textcite{WohlinRunesonHostOhlssonRegnellWesslen2012} an experiment is appropriate to precisely and systematically measure something in a controlled environment.

Each test will be an implementation of an algorithm chosen to test a specific aspect of WebAssembly and will be compiled from C/C++ to both WebAssembly and JavaScript using Emscripten. The suite will run tests, first using JavaScript and then using WebAssembly, one by one. After each run has completed the time it took to execute will be displayed in milliseconds. Table \ref{table:suite} provides a logical layout of the test suite.

“1.	
Scoping
 
2.	
Planning
 
3.	
Operation
 
4.	
Analysis and interpretation
 
5.	
Presentation and package”

Excerpt From: Claes Wohlin, Per Runeson, Martin Höst, Magnus C. Ohlsson, Björn Regnell and Anders Wesslén. “Experimentation in Software Engineering”. Apple Books. 


\hl{variabler och faktorer samt for och nackdelar med respektive metod, anvand wohlin som referens}

\begin{table}[h!]
\centering
\begin{tabular}{@{}llll@{}} 
\hline
 Algorithm & JavaScript & WebAssembly \\ [0.5ex] 
 \hline
 One & 123 & 123 \\ 
 Two & 456 & 456 \\
 ... & ... & ... \\
 Many & N & N \\ [1ex] 
 \hline
\end{tabular}
\caption{Test suite logical layout using mock data}
\label{table:suite}
\end{table}

The suite of compiled tests will be published as open source on Github\footnote{http://github.com/a17danos}. The test suite will be executed on the latest versions of the web browsers Chrome, Edge, Firefox and Safari. The result will be statistically evaluated using ANOVA in order to answer the research question.

To answer the research question an experiment will be executed by running the benchmarking suite, similar to what has been done before by \textcite{HaasRossbergSchuffTitzerHolmanGohmanWagnerZakaiBastien2017}, \textcite{ReiserBlaser2017}, \textcite{,HerreraChenLavoieHendren2018} and \textcite{Zakai2018}.

%The results will be used as a baseline.

The benchmarking suite will be executed twice, once on the latest version of Windows, and once on the latest version of macOS. Given that Safari is only available on macOS and Edge is only available on Windows the test suite will only be executed one on those web browsers.

\hl{Should I (also) execute these tests on mobile phones? Running the tests is not really a challenge or particullary time consuming.}

The two operating systems will run on the same computer, a Macbook Pro. Windows will be installed using BootCamp\footnote{https://support.apple.com/boot-camp}. The two operating systems will be freshly installed (non-OEM) and cooled off in 24 hours so that all indexing has been done executing. The benchmarking will be performed with the power cord connected and the computer will \emph{not} be connected to the internet (during the benchmarking).

This method is designed for high validity with as few hidden variables as possible. The test suite will be executed $1 000$ times (in a row) to provide high reliability.

\subsection{Ethics}

This experiment does not include any other humans than the author pressing the button to start the experiment. WebAssembly och asm.js are both open specifications. Emscripten is open source, available on Github. The forthcoming benchmarking test suite will be open source and available on Github. The results along with this thesis is available on Github. WebAssembly and JavaScript is executed in sandboxed environment which means that even if there would be nefarious code in the test suite running the test suite would not be able to spread a computer virus or spy on the computer on which it was executed.

\hl{problemen med bechmark och oschtrictet med referens}

\begin{comment}
“Any empirical research activity involving human subjects must take ethical aspects into consideration. Some aspects are regulated by national laws, others are not regulated at all. Andrews and Pradhan identified ethical issues in software engineering, and found existing policies to be insufficient [3]. Hall and Flynn surveyed ethical practice and awareness in the UK, and found alarming unawareness [71], and nothing indicates this country being an exception.
Singer and Vinson initiated a discussion on ethical issues  [158], continued to discuss cases of ethical issues [159], and provided practical guidelines for the conduct of empirical studies [174]. They identified four key principles:
Subjects must give informed consent to their participation, implying that they should have access to all relevant information about the study, before making their decision to participate or not. Their decision must be explicit and free, also with respect to implicit dependencies on managers, professors etc.
The study should have scientific value in order to motivate subjects to expose themselves to the risks of the empirical study, even if these are minimal.
Researchers must take all possible measures to maintain confidentiality of data and sensitive information, even when this is in conflict with the publication interests.
Weighing risks, harms and benefits, the beneficence must overweigh, not only for the individual subjects, but also for groups of subjects and organizations.
These principles are turned into more practical guidelines below, related to planning, conduct and reporting of an experimental study. We also refer to Sieber [156] for a checklist of risks for subjects to be addressed in experimentation.
Ethical review. In countries where legislation require an ethical review for studies involving human subjects, like Canada, USA and Australia, the procedures and documentation for such studies have to be followed to enable the study. The review implies a proposal being put before an Ethical Review Board (ERB) at the university or government agency, for approval. These procedures are mostly derived from the needs in biomedical research, and thus generally not tailored to software engineering needs. Vinson and Singer mention, for example, that in Canada, it is not clear whether studies using source code (being written by humans and revealing information about them) and its data are subject to the review procedures [174].
The documentation needed in the review typically includes a description of the project, comprising details on subjects and treatments, documentation of how informed consent is obtained, and a review of ethical aspects of the project.
Informed consent. The basis for a human-oriented empirical study (e.g. an experiment) is that subjects are participating voluntarily, and that they have enough information to make the decision to participate or not. Further, this includes the option to withdraw from the study any time, without any penalty for the subject. In order to make this decision process clear and explicit, consent should be given in writing.
A consent form typically comprises the following elements [174]:
Research project title: for identification purposes.
Contact information: both research and ethics contact.
Consent and comprehension: the subjects state that they understand the conditions for the project and accept them.
Withdrawal: states the right to withdraw without penalties.
Confidentiality: defined the promises about confidential handling of data and participation.
Risks and benefits: explicitly listing what the subjects risk and gain.
Clarification: the right for the subject to ask questions for clarification of their role in the study.
Signature: mostly by both subject and researcher, one copy for each, to indicate it is a mutual agreement.
In some experimental designs, full disclosure of the research goal and procedures may compromise the conduct of the experiment as such. For example, knowing the hypothesis beforehand, the subjects may change their behavior accordingly. Then, partial disclosure may be used, meaning that the experimental goals and procedures are presented at a higher level of abstraction.
For empirical studies in companies (in vivo), the consent must include both the organization and the individual subjects. In particular, the subjects cannot be ordered to participate, and are free to withdraw without penalties. Further, issues of confidentiality and sensitive results within the company also must be taken into consideration.
The consent may be differentiated on whether it is given for the goals of the current study, or if data may be used for further studies with different goals.
Confidentiality. The subjects must be sure that any information they share with researchers will remain confidential. Three aspects on confidentiality are [174]:
Data privacy, referring to restricted access to data, imposed by for example password protection and encryption.
Data anonymity, addressed by keeping the identities of subjects apart from the data.
Anonymity of participation, meaning that the consent decision should be kept secret.
Since the empirical studies (including experiments) aim at drawing general conclusions, there is no principal conflict with keeping the specifics confidential. Data privacy issues can also be solved by good working practices. However, as the number of subjects often are small, there is a risk that information may be traced to individuals, even if anonymized, thereby threatening anonymity. Further, for the external validity of the study, information about the study context should be reported, which may conflict the anonymity. The anonymity of participation is the hardest to achieve. Students in a class, which are enrolled in experiments, may have the formal right to decline participation, but it is hard to hide from the researcher which students participate or not. Similarly in companies, managers would easily know who is participating in the study. Vinson and Singer advice that “for studies involving students, researchers should avoid recruiting students in the classroom setting and should avoid trying to recruit their own students” [174] – an advice followed by few.
Sensitive results. Outcomes from any empirical study may be sensitive in different respects for different stakeholders. The individual performance of a subject is one example, which managers or professors would like to see. The conclusions from the empirical study may also be sensitive, especially if a sponsor of the project has a stake in it. The results may also be sensitive to the researchers, for example, if an experiment does not support their hypotheses.
These situations stress the moral standards of the stakeholders. Possible measures to take to prepare for these situations include different kinds of independency. For results sensitive to:
Subjects, make sure that confidentiality procedures apply, independently of facts revealed (crime exempted [159]),
Sponsors, include clear statements on rights for independent publications of the anonymized results in the informed consent form for companies, and in research project contracts,
Researchers, consider having peers to perform statistical analyses on anonymized data (both subjects and scales) independently from the experimenters, especially when the treatment is designed by the experimenters themselves. This also reduces the threat of experimenter expectancies.
These actions reduce the risk of being stuck in ethical dilemmas, and increases the validity of all empirical studies.
Inducement. In recruiting subjects for an experiment, there must be inducements to motivate their participation. The experience and knowledge gained by applying a new method may be inducement enough. In order to treat all participants fair, all subjects should be given the opportunity to learn about all treatments, even if the experimental design does not require it.
Some monetary inducement may also be involved, for example, in the form of cash payment, participation in a lottery, or, for professional subjects, their ordinary salary. Independently of form, the inducement must be balanced to ensure that the consent to participate really is voluntary, and not forced by too large economic or other inducements.
Feedback. To maintain long term relationships and trust with the subjects of a study, feedback of results and analysis are important. Subjects must not agree on the analysis, but should be given the opportunity to get information about the study and its results. If feasible, from a confidentiality point of view, data from individual’s performance may be reported back together with the overall analysis.
Conclusion on ethics. Singer and Vinson ask in their early work for a code of ethics for empirical software engineering [159]. Still, 10 years later, the community has not yet developed one; the closest is Vinson and Singer’s guidelines [174], which are summarized above. Research funding agencies start to require general codes of ethics be applied, which may not fit the purpose. Concrete and tailored ethical guidelines for empirical software engineering research would benefit both the subjects, which they aim to protect, and the development of the research field as such.”

Excerpt From: Claes Wohlin, Per Runeson, Martin Höst, Magnus C. Ohlsson, Björn Regnell and Anders Wesslén. “Experimentation in Software Engineering”. Apple Books. 
\end{comment}
